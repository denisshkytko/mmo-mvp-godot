# Стиль авторинга способностей (независимо от класса)

English version: `docs/ABILITY_AUTHORING_STYLE.md`.

Этот документ фиксирует единый стиль авторинга для всех классовых способностей (`.tres`) на базе текущего подхода paladin/shaman.

## 1) Структура ресурса

Используйте тот же порядок секций, что и в существующих файлах классов:

1. `[gd_resource ...]`
2. `[ext_resource ...]`
3. `[sub_resource RankData ...]` (все ранги)
4. `[sub_resource Effect... ...]`
5. `[resource]` (`id`, `name`, `icon`, `description`, таргетинг, `effect`, `ranks`)

## 2) Локализация на промежуточном этапе

До внедрения внешнего хранилища локализации:
- используйте одно поле `description` в `.tres` и плейсхолдеры для динамических значений;
- не создавайте отдельные RU/EN файлы для одной способности.

## 3) Токены шаблона тултипа

По возможности используйте в `description` следующие плейсхолдеры:
- `{X}`  : основное flat-значение (в тултипе используется scaled flat)
- `{X2}` : второе flat-значение (сырое `value_flat_2`)
- `{M}`  : магическое/вторичное scaled flat
- `{P}`  : основной процент (`value_pct`)
- `{P2}` : второй процент (`value_pct_2`)
- `{T}`  : пороговый процент (маппится в `value_pct`)
- `{HP}` : процент HP (маппится в `value_pct`)
- `{MP}` : процент MP (маппится в `value_pct_2`)
- `{D}`  : длительность в секундах (`duration_sec`)
- `{CD}` : cooldown в секундах (`cooldown_sec`)

## 4) Именование

- `id`: `snake_case`, уникальный в рамках игры.
- имена файлов: `snake_case.tres`.
- `name`: отображаемое имя в UI (локализуемое).

## 5) Script binding

В каждом `.tres` обязательно:
- `script = ExtResource("...")` должен указывать на `res://core/abilities/ability_definition.gd`.
- `effect` и ранги должны быть корректно типизированы.

## 6) Регистрация в манифесте

Каждая новая способность должна быть зарегистрирована в:
- `core/data/abilities/abilities_manifest.tres`

## 7) Иконки

- имя иконки: `snake_case` по названию способности.
- размещение: `assets/icons/abilities/<class>/`.
